var I=Object.defineProperty;var p=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var E=(e,t,u)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,b=(e,t)=>{for(var u in t||(t={}))f.call(t,u)&&E(e,u,t[u]);if(p)for(var u of p(t))x.call(t,u)&&E(e,u,t[u]);return e};var y=(e,t)=>{var u={};for(var s in e)f.call(e,s)&&t.indexOf(s)<0&&(u[s]=e[s]);if(e!=null&&p)for(var s of p(e))t.indexOf(s)<0&&x.call(e,s)&&(u[s]=e[s]);return u};import{u as T}from"./useRequest.563f7c37.js";import{ab as B,r as F,ac as g,c as h,j as a,N as w,B as j,ad as S,D as k,K as c,ae as C,h as A}from"./vendor.b52cd847.js";const D=s=>{var i=s,{tex:e,tok:t}=i,u=y(i,["tex","tok"]);const l=b({spd:5,pit:5,vol:15,per:5118,tok:t,tex:e,lan:"zh",aue:3,ctp:1,cuid:t},u),o=[];return Object.keys(l).forEach(r=>{o.push(`${r}=${encodeURIComponent(l[r])}`)}),console.log(o.join("&")),B.post("http://tsn.baidu.com/text2audio",o.join("&"),{responseType:"blob"})},O=[{value:1,label:"\u5EA6\u5C0F\u5B87\uFF08\u7537\u58F0\uFF09"},{value:0,label:"\u5EA6\u5C0F\u7F8E\uFF08\u6807\u51C6\u5973\u58F0\uFF09"},{value:3,label:"\u5EA6\u900D\u9065\uFF08\u6807\u51C6\u7537\u58F0\uFF09"},{value:4,label:"\u5EA6\u4E2B\u4E2B(\u53EF\u7231\u5973\u58F0)"},{value:5118,label:"\u5C0F\u9E7F\uFF08\u5973\u58F0\uFF09"},{value:5,label:"\u5EA6\u5C0F\u5A07"}],U=()=>{const[e,t]=F.exports.useState(""),[u,s]=F.exports.useState(""),[i,l]=F.exports.useState(!1),o=F.exports.useRef(),{data:r}=T(async()=>{const d="OG73hGbMO7QQW6ec2q8HgSvV",m="7P6oWaePCdis4QYUT1otetG4c2bwpmfy",n=await B.get("/baidu_token",{params:{grant_type:"client_credentials",client_id:d,client_secret:m}});return n==null?void 0:n.data.access_token}),[v]=g();return h("div",{children:[h("div",{style:{marginBottom:10},children:[a(w,{placeholder:"\u8F93\u5165\u8BED\u97F3\u5185\u5BB9",value:e,onChange:d=>t(d),style:{width:300},className:"mr-10"}),a(j,{type:"primary",onClick:async d=>{const m=await v.validate(),n=await D(b({tok:r,tex:e},m));s(URL.createObjectURL(n.data)),o.current.play()},className:"mr-10",children:"\u5408\u6210"}),a(j,{icon:a(S,{}),onClick:()=>l(!0),children:"\u53C2\u6570\u8C03\u6574"})]}),a(k,{visible:i,title:"\u53C2\u6570\u8C03\u6574",width:600,onCancel:()=>l(!1),onOk:()=>l(!1),children:h(c,{title:"\u53C2\u6570",style:{marginTop:30},initialValues:{spd:5,vol:5,pit:5,per:0},form:v,children:[a(c.Item,{label:"\u8BED\u901F",field:"spd",children:a(C,{max:15})}),a(c.Item,{label:"\u97F3\u91CF",field:"vol",children:a(C,{max:15})}),a(c.Item,{label:"\u97F3\u8C03",field:"pit",children:a(C,{max:15})}),a(c.Item,{label:"\u8BED\u97F3\u5E93",field:"per",children:a(A,{options:O})})]})}),a("div",{children:a("audio",{src:u,controls:!0,ref:o})})]})};export{U as default};
